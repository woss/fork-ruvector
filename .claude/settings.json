{
  "env": {
    "CLAUDE_FLOW_AUTO_COMMIT": "false",
    "CLAUDE_FLOW_AUTO_PUSH": "false",
    "CLAUDE_FLOW_HOOKS_ENABLED": "true",
    "CLAUDE_FLOW_TELEMETRY_ENABLED": "true",
    "CLAUDE_FLOW_REMOTE_EXECUTION": "true",
    "CLAUDE_FLOW_CHECKPOINTS_ENABLED": "true",
    "RUVECTOR_MEMORY_BACKEND": "rvlite",
    "RUVECTOR_WASM_SIZE_LIMIT_KB": "3072",
    "RUVECTOR_INTELLIGENCE_ENABLED": "true",
    "RUVECTOR_LEARNING_RATE": "0.1",
    "INTELLIGENCE_MODE": "treatment"
  },
  "permissions": {
    "allow": [
      "Bash(npx claude-flow:*)",
      "Bash(npm run:*)",
      "Bash(npm test:*)",
      "Bash(cargo:*)",
      "Bash(wasm-pack:*)",
      "Bash(git status)",
      "Bash(git diff:*)",
      "Bash(git log:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push)",
      "Bash(git config:*)",
      "Bash(git tag:*)",
      "Bash(git branch:*)",
      "Bash(git checkout:*)",
      "Bash(git stash:*)",
      "Bash(jq:*)",
      "Bash(node:*)",
      "Bash(which:*)",
      "Bash(pwd)",
      "Bash(ls:*)",
      "Bash(.claude/hooks:*)",
      "Bash(.claude/intelligence:*)"
    ],
    "deny": [
      "Bash(rm -rf /)",
      "Bash(cargo publish:*)"
    ]
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "timeout": 3000,
            "command": "/bin/bash -c 'INPUT=$(cat); CMD=$(echo \"$INPUT\" | jq -r \".tool_input.command // empty\"); cd /workspaces/ruvector/.claude/intelligence && INTELLIGENCE_MODE=treatment node cli.js pre-command \"$CMD\" 2>/dev/null'"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "timeout": 3000,
            "command": "/bin/bash -c 'INPUT=$(cat); FILE=$(echo \"$INPUT\" | jq -r \".tool_input.file_path // .tool_input.path // empty\"); if [ -n \"$FILE\" ]; then cd /workspaces/ruvector/.claude/intelligence && INTELLIGENCE_MODE=treatment node cli.js pre-edit \"$FILE\" 2>/dev/null; fi'"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'INPUT=$(cat); CMD=$(echo \"$INPUT\" | jq -r \".tool_input.command // empty\"); SUCCESS=\"true\"; STDERR=\"\"; if echo \"$INPUT\" | jq -e \".tool_result.stderr\" 2>/dev/null | grep -q .; then SUCCESS=\"false\"; STDERR=$(echo \"$INPUT\" | jq -r \".tool_result.stderr // empty\" | head -c 300); fi; (cd /workspaces/ruvector/.claude/intelligence && node cli.js post-command \"$CMD\" \"$SUCCESS\" \"$STDERR\" 2>/dev/null) &'"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'INPUT=$(cat); FILE=$(echo \"$INPUT\" | jq -r \".tool_input.file_path // .tool_input.path // empty\"); if [ -n \"$FILE\" ]; then (cd /workspaces/ruvector/.claude/intelligence && node cli.js post-edit \"$FILE\" \"true\" 2>/dev/null) & fi'"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "manual",
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'echo \"ðŸ”„ PreCompact - RuVector Intelligent Context:\"; echo \"\"; cd /workspaces/ruvector/.claude/intelligence && STATS=$(node cli.js stats 2>/dev/null | tail -n +2); echo \"ðŸ§  LEARNED PATTERNS:\"; echo \"$STATS\" | jq -r \".topPatterns[] | \\\"   \\(.state): \\(.bestAction) (Q=\\(.qValue))\\\"\" 2>/dev/null || echo \"   No patterns yet\"; echo \"\"; echo \"ðŸ¦€ KEY CRATES (42 total):\"; echo \"   ruvector-core (HNSW, SIMD) | rvlite (WASM DB)\"; echo \"   sona (ReasoningBank) | ruvector-graph (Cypher)\"; echo \"   ruvector-gnn (GNN) | ruvector-mincut (Min-Cut)\"; echo \"\"; echo \"ðŸ“¦ NPM: @ruvector/core, @ruvector/tiny-dancer\"; echo \"âš¡ GOLDEN RULE: 1 MESSAGE = ALL OPERATIONS\"; echo \"âœ… Ready for compact\"'"
          }
        ]
      },
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'echo \"ðŸ”„ Auto-Compact - Self-Learning Context:\"; echo \"\"; cd /workspaces/ruvector/.claude/intelligence && STATS=$(node cli.js stats 2>/dev/null | tail -n +2); MEM=$(echo \"$STATS\" | jq -r \".memory.total // 0\" 2>/dev/null); TRAJ=$(echo \"$STATS\" | jq -r \".trajectories // 0\" 2>/dev/null); PAT=$(echo \"$STATS\" | jq -r \".patterns // 0\" 2>/dev/null); echo \"ðŸ“Š Learning Stats: $MEM memories | $TRAJ trajectories | $PAT patterns\"; echo \"\"; echo \"ðŸŽ¯ ARCHITECTURE:\"; echo \"   42 Rust crates | rvlite WASM orchestration\"; echo \"   @ruvector/core for native HNSW (150x faster)\"; echo \"   Q-learning from sona for action selection\"; echo \"\"; echo \"âš¡ CONCURRENT: Task tool for agents, MCP for coordination\"; echo \"âœ… Auto-compact with learned context\"'"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'echo \"ðŸ›‘ Session ending - persisting learned state...\"; npx claude-flow@alpha hooks session-end --generate-summary true --persist-state true 2>/dev/null || true; cd /workspaces/ruvector/.claude/intelligence && STATS=$(node cli.js stats 2>/dev/null | tail -n +2); MEM=$(echo \"$STATS\" | jq -r \".memory.total // 0\" 2>/dev/null); TRAJ=$(echo \"$STATS\" | jq -r \".trajectories // 0\" 2>/dev/null); echo \"ðŸ“Š Session learned: $MEM memories, $TRAJ trajectories\"; echo \"âœ… Intelligence state persisted\"'"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "timeout": 5000,
            "command": "/bin/bash -c 'echo \"ðŸ§  RuVector Intelligence Layer Active\"; echo \"\"; cd /workspaces/ruvector/.claude/intelligence && INTELLIGENCE_MODE=treatment node -e \"const I = (await import(\\\"./index.js\\\")).default; const i = new I(); const s = i.stats(); console.log(\\\"ðŸ“Š Learned: \\\" + s.patterns + \\\" patterns | \\\" + s.memory.total + \\\" memories\\\"); if (s.topPatterns && s.topPatterns.length > 0) { console.log(\\\"\\\"); console.log(\\\"ðŸŽ¯ Top Learned Actions:\\\"); s.topPatterns.slice(0,3).forEach(p => console.log(\\\"   \\\" + p.state + \\\": \\\" + p.bestAction + \\\" (Q=\\\" + p.qValue + \\\")\\\")); }\" 2>/dev/null; echo \"\"; echo \"âš¡ Intelligence guides: agent routing, error fixes, file sequences\"'"
          }
        ]
      }
    ]
  },
  "includeCoAuthoredBy": true,
  "enabledMcpjsonServers": ["claude-flow", "ruv-swarm"],
  "statusLine": {
    "type": "command",
    "command": ".claude/statusline-command.sh"
  }
}
